<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Swift static factory design pattern - </title>
    <meta name="description" content="In this article I&#39;ll teach you about the static factory design pattern and show some use cases using the Swift programming language.">
    
    <meta property="og:url" content="/posts/swift-static-factory-design-pattern/">
    <meta property="og:title" content="Swift static factory design pattern - ">
    <meta property="og:description" content="In this article I&#39;ll teach you about the static factory design pattern and show some use cases using the Swift programming language.">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Swift static factory design pattern - ">
    <meta name="twitter:description" content="In this article I&#39;ll teach you about the static factory design pattern and show some use cases using the Swift programming language.">
    
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <link rel="shortcut icon" href="/images/icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/images/icons/icon-320.png" type="image/png">
    
    <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon-180x180.png">

</head>

<body>
    <header id="navigation">
        <a id="site-logo" href="">
            <figure>
                <picture>
                    <source
                        srcset="/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        id="logo-image"
                        src="/images/logos/logo.png"
                        alt="Logo of "
                        title=""
                    >
                </picture>
            </figure>
        </a>
    
        <nav id="primary-menu">
            <input type="checkbox" id="primary-menu-button" name="menu-button" class="menu-button">
            <label for="primary-menu-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </label>
            <div class="menu-items">
                <a href="/">Home</a>
                <a href="/blog/">Blog</a>
                <a href="/posts/pages/1/">Posts</a>
                <a href="/authors/">Authors</a>
                <a href="/tags/">Tags</a>
                <a href="/my-page/">My page</a>
            </div>
        </nav>
    
        <nav id="secondary-menu">
            <input type="checkbox" id="secondary-menu-button" name="menu-button" class="menu-button">
            <label for="secondary-menu-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="1"></circle>
                    <circle cx="12" cy="5" r="1"></circle>
                    <circle cx="12" cy="19" r="1"></circle>
                </svg>
            </label>
            <div class="menu-items right">
                <a href="#">My account</a>
                <a href="/">Logout</a>
            </div>
        </nav>
    </header>
        
    <main>

<article>
    <header>
        <section id="post-header" class="content-wrapper">
            <time datetime="2018-05-28 16:20:00">2018-05-28 16:20:00</time>
            <h1 class="title">Swift static factory design pattern</h1>
            <p class="excerpt">In this article I&#39;ll teach you about the static factory design pattern and show some use cases using the Swift programming language.</p>
        </section>
        
    </header>

    <section id="contents" class="content-wrapper">
    
    <h2>Real world static factory pattern examples</h2><h2>Named constructors</h2><p>The first good thing about the static factory pattern is that every static factory method can have a name. Apple uses this pattern in their <code>UIColor</code> class implementation to <a href="http://www.informit.com/articles/article.aspx?p=1216151" target="_blank">create</a> named colors like <code>.red</code>, <code>.yellow</code>, etc. Please note that the implementation in Swift is not really a method, but a static property, which returns the actual instance.</p><pre><code class="language-swift">public extension TimeInterval {
    public static var second: TimeInterval { return 1 }
    public static var minute: TimeInterval { return 60 }
    public static var hour: TimeInterval { return 3_600 }
    public static var day: TimeInterval { return 86_400 }
    public static var week: TimeInterval { return 604_800 }
}
</code></pre><p>If its so hard to memorize how many seconds is a day or a week why dont we create a named initializer for it. See? <code>TimeInterval.week</code> is much better than <code>604_800</code>. </p><h2>Cached objects</h2><p>The next good thing about the static factory pattern is that it can support caching for the sake of better memory usage. This way you can limit the number of objects created if you are initializing it through the static <a href="https://dzone.com/articles/constructors-or-static-factory-methods" target="_blank">constructor</a> (aka. static <a href="http://www.bernardosulzbach.com/oo-development/static-factory-vs-constructors/" target="_blank">factory method</a>). </p><pre><code class="language-swift">class Service {

    var name: String

    // MARK: - cache

    private static var cache: [String:Service] = [:]

    private static func cached(name: String) -> Service {
        if Service.cache[name] == nil {
            Service.cache[name] = Service(named: name)
        }
        return Service.cache[name]!
    }

    // MARK: - static factory

    static var local: Service {
        return Service.cached(name: "local")
    }

    static var remote: Service {
        return Service.cached(name: "remote")
    }

    // MARK: - init

    init(named name: String) {
        self.name = name
    }
}
</code></pre><h2>Local initialization scope</h2><p>Another good thing about static factory methods that you can limit the initialization of a class to a private scope level. In other words object creation will only be available through the static factory method. You just have to make the <code>init</code> method private.</p><pre><code class="language-swift">public final class Service {

    var name: String

    private init(name: String) {
        self.name = name
    }

    public static var local: Service {
        return Service(name: "local")
    }

    public static var remote: Service {
        return Service(name: "remote")
    }
}
</code></pre><p>Note that you can restrict subclassing with the final & static keyword. If you want to allow subclassing you should remove <code>final</code> and use the <code>class</code> keyword instead of the <code>static</code> for the properties, this way subclasses can override factory methods. </p><h2>Statically return anything</h2><p>Static factory can also return subtypes of a given object, but why dont we take this even one step further? You can also return any kind of type from a static method, I know this seems like a cheat, because Im not creating an instance of <code>UIColor</code> here, but I believe that its worth to mention this method here, because its closely related to static factories. This technique can be really useful sometimes. </p><pre><code class="language-swift">extension UIColor {

    private static func image(with color: UIColor) -> UIImage {
        let rect = CGRect(x: 0, y: 0, width: 1, height: 1)
        UIGraphicsBeginImageContext(rect.size)
        let context = UIGraphicsGetCurrentContext()!
        context.setFillColor(color.cgColor)
        context.fill(rect)
        let img = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return img!
    }

    static var redImage: UIImage {
        return UIColor.image(with: .red)
    }
}
</code></pre>
        
    </section>
    
    <h2>Next</h2>
    
    <h2>Prev</h2>
        <div class="post card">
            <a href="/posts/hummingbird-routing-and-requests/" target="">
                <figure>
                    <picture>
                        <img
                            src=""
                            alt=""
                            title=""
                        >
                    </picture>
                </figure>
                <section>
                    <time datetime="2023-03-17 16:20:00">2023-03-17 16:20:00</time>
                    <h2 class="title">Hummingbird routing and requests</h2>
                </section>
                <p>Beginner&#39;s guide to learn all about routing and request handling using the Hummingbird server-side Swift framework.</p>
            </a>
        
            
            
        
        </div>
    
    <h2>Related</h2>
    Empty.
    
    <h2>More by author(s)</h2>
    Empty.

</article>

    </main>

    <footer id="page-footer">
        <section class="content-wrapper">
            <figure>
                <picture>
                    <source
                        srcset="/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                    >
                    <img
                        id="logo-image"
                        src="/images/logos/logo.png"
                        alt="Logo of "
                        title=""
                    >
                </picture>
            </figure>
    
            <p>This site was generated using the <a href="https://swift.org/" target="_blank">Swift</a> programming language.</p>
            
            <p>
                <a href="https://binarybirds.com/">Home</a> 路
                <a href="mailto:binarybirdsofficial@gmail.com">Email</a> 路
                <a href="https://github.com/binarybirds/">GitHub</a> 路
                <a href="https://x.com/tiborbodecs">Twitter</a> 路
                <a href="/rss.xml" target="_blank">RSS</a> 路
                <a href="/sitemap.xml" target="_blank">Sitemap</a>
            </p>
    
            <p class="small"> &copy; 2022 - 2024.</p>
        </section>
    </footer>
</body>
</html>
